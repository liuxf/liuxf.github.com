<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="Lydiafly : liuxf.github.com" />
    <title>UX lib</title>
  </head>
  <body>
    <script>
      (function(window, undefined){
        var hasOwn = Object.prototype.hasOwnProperty;
        var KEY = undefined;
        var objName = 'UX';
        var ux = window[objName];
        var UX = window[objName] = {
          mix: function(target, source, ovr){
            for (KEY in source) {
                if ((ovr !== false || !(KEY in target)) && hasOwn.call(source, KEY)) {
                    target[KEY] = source[KEY];
                }
            }
            return target;
          }
        };
        UX.mix(UX, {
          debug:false,
          log:function(msg){
            if (UX.debug && window.console) {
                window.console.log(msg);
            }
          },
          noop:function(){},
          each:function(object, fn){
            if(typeof fn === 'function'){
              var length = object.length;
              if(length === undefined){
                for(KEY in object){
                  if(fn.call(object[KEY], KEY, object[KEY]) === false){
                    break;
                  }
                }
              }else{
                for(KEY=0;KEY<length;KEY++){
                  if(fn.call(object[KEY], KEY, object[KEY]) === false){
                    break;
                  }
                }
              }
            }
          },
          define:function(ns, object){
            if (typeof ns === 'string') {
                var parent = UX;
                var nss = ns.split('.');
                if (ns.charAt(0) === '.') {
                    parent = window;
                    nss.shift();
                }
                while(ns = nss.shift()){
                    parent[ns] = parent[ns] || {};
                    parent = parent[ns];
                }
                if(object){
                  UX.mix(parent, object);
                }
                return parent;
            }
            return ns;
          },
          error:function(e, type){
        		type = type || Error;
      			throw new type(e);
      		}
        });
      })(this);
      UX.define('xxx',{a:1,b:2});
    </script>
  </body>
</html>
